spring:
  app: 
    frontend-base-url: http://localhost:3000
  config: 
    import: optional:file:.env

  datasource:
    url: ${DB_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 3
      minimum-idle: 1
      connection-timeout: 20000
      idle-timeout: 300000
      max-lifetime: 1200000
      keepalive-time: 30000
      connection-test-query: SELECT 1

  mail:
    host: smtp.gmail.com
    port: 587
    username: clinicsystemsg@gmail.com
    password: qqct huoi xzlq nuky
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
          ssl:
            trust: smtp.gmail.com

  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate.format_sql: true
      hibernate.hbm2ddl.auto: none
      # Fix prepared statement caching issue with PostgreSQL connection pooler
      hibernate.jdbc.batch_size: 0
      hibernate.connection.provider_disables_autocommit: false
      # Disable statement caching to avoid "prepared statement already exists" errors
      hibernate.jdbc.use_get_generated_keys: true

  flyway:
    enabled: true
    locations: classpath:db/migration
    validate-on-migrate: false
    clean-disabled: true
    baseline-on-migrate: false

  h2:
    console:
      enabled: false

management:
  endpoints:
    web:
      exposure:
        include: health,info

security:
  jwt:
    secret: ${JWT_SECRET}
    expiry-seconds: 86400

web:
  cors:
    allowed-origins: "http://localhost:3000,http://localhost:3001,http://localhost:5173"
aqms:
  queue:
    expressFraction: 0.333
    emergencyFraction: 0.125
  rules:
    minAdvanceHoursForChange: 24
